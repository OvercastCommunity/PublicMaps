<map>
<!-- Sound keys include for all maps -->
<include id="sound-keys"/>

<!-- Legacy PvP for majority of maps -->
<unless constant="legacy-pvp" constant-comparison="defined">
    <include id="legacy-pvp"/>
</unless>
<if constant="legacy-pvp" constant-comparison="defined">
    <if constant="legacy-pvp" constant-value="true">
        <include id="legacy-pvp"/>
    </if>
</if>

<variables>
    <!-- Add maxbuildheight variable to pre-proto 1.5 maps -->
    <maxbuildheight id="maxbuildheight"/>
    <!-- Add worldtime variable to all maps -->
    <worldtime id="worldtime"/>
</variables>

<!-- Disable players in locator bar -->
<if min-server-version="1.21.10">
    <spawns> <!-- Using the locatorBar gamerule also hides entities in maps -->
        <player-kit>
            <attribute operation="multiply" amount="-1">waypoint_transmit_range</attribute>
        </player-kit>
    </spawns>
    <gamerules>
        <commandBlocksEnabled>false</commandBlocksEnabled>
    </gamerules>
</if>

<if has-variant="tournament,te,ranked,comp,5v5,5v5-ac,7v7">
    <if variant="tournament,te,ranked,comp,5v5,5v5-ac,7v7">
        <phase>staging</phase>
    </if>
</if>
</map>
